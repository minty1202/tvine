# セッション削除

## 概要

タスク完了後にセッションを片付ける。
確認モーダルを経て、Claude Code の停止・スロットのコマンド実行・worktree の削除を行う。

## 確認モーダル

削除ボタンから開く。以下を表示して確認を求める：

- ブランチ名
- ベースブランチ
- スロットのラベル（設定されている場合）
- 実行される処理の説明（削除時コマンド、worktree 削除）

## 削除時の処理

1. Claude Code プロセスとターミナルプロセスを停止
2. スロットに削除時コマンドが設定されている場合、実行する
3. `git worktree remove` で worktree を削除
4. セッションデータを削除（session.json, status.json、セッションディレクトリ）
5. セッション一覧から削除

排他スロットの場合、セッションが削除されると自動的に解放される（セッション側の slot_id が消えることで使用可能になる）。

## エラー時

git のエラーメッセージをそのまま表示する。

| ケース | 対応 |
| --- | --- |
| git コマンド失敗（未マージ、ロック等） | git のエラーをそのまま表示、削除を中止 |
| 削除時コマンド失敗 | エラーを表示するが、削除処理は続行する |
