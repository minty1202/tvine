# セッション作成と worktree 管理の基盤

Issue: #4

## チェックリスト

- [ ] [CLI でバックエンドの動作確認基盤を作る](#cli-でバックエンドの動作確認基盤を作る)

## 未決

- フロントエンドとバックエンドの型共有をどうするか
- create ハンドラーまでの実装をどう分割するか

## 方針

### CLI でバックエンドの動作確認基盤を作る

#### 方針

- バックエンドから作る
- Tauri を経由せず core ロジックを呼び出せる CLI バイナリを最初に作る
- CLI で一連の流れ（worktree 作成 → session.json 保存）を確認してからフロントエンドに取りかかる
- CLI は開発専用。リリースビルドには含めない

#### 実装方法

##### cli クレート

- `crates/cli/` に別クレートとして作成
- `cargo install -p tvine` ではインストールされない（パッケージ指定が別）
- 開発者は `cargo run -p cli` で使う
- 引数パーサーは clap

##### ステップ

1. `crates/cli/` を作成し workspace に追加
2. clap を依存に追加
3. `cargo run -p cli` でヘルプが表示される状態にする

##### ハンドラーの共有

- ユースケースを実行するハンドラーを registry に置く
- src-tauri と cli の両方が同じハンドラーを呼ぶ
- src-tauri の Tauri コマンドや cli の clap サブコマンドは入力のパースと結果の返却だけを担当する
